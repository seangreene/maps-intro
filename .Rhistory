demo(graphics)
demo(graphics)
demo(persp)
plot
cats
demo(persp)
?
data <- read.delim("merged-multirace.txt")
setwd("~/dataviz-fall-2013/map-intro")
california.R
setwd("~/dataviz-fall-2013/map-intro")
setwd("~/seangreene/dataviz-fall-2013/bar-chart")
setwd("~/dataviz-fall-2013/maps-intro")
data <- read.delim("merged-multirace.txt")
head(data)
dim(data)
unique(data$year)
sf <- subset(data, county == "San Francisco")
head(sf)
data <- data[order(data$pctwhite), ]
head(data)
subset(data, pctwhite == max(data$pctwhite))
y2020 <- subset(data, year == 2020)
subset(data, pctwhite == max(y2020$pctwhite))
subset(data, pctblack == min(data$pctblack))
subset(data, pctasian == max(y1980$pctasian))
y1980 <- subset(data, year == 1980)
subset(data, pctasian == max(y1980$pctasian))
plot(sf$year, sf$pcthispanic, type="1", ylim=c(0,max(data$pcthispanic)), main="Hispanics in San Francisco")
sf <- subset(data, county == "San Francisco")
plot(sf$year, sf$pcthispanic, type="l", ylim=c(0,max(data$pcthispanic)), main="Hispanics in San Francisco County")
sf
?plot
plot(sf$year, sf$hispanic, type="l")
plot(sf$year, sf$hispanic, type="p")
plot(sf$year, sf$hispanic, type="s")
sf <- sf[order(sf$year), ]
plot(sf$year, sf$hispanic, type="l")
plot(sf$year, sf$pcthispanic, type="l", ylim=c(0,max(data$pcthispanic)), main="Hispanics in San Francisco County")
plot(sf$year, sf$hispanic, type="l")
plot(sf$year, sf$pcthispanic, type="l", ylim=c(0,max(data$pcthispanic)), main="Hispanics in San Francisco County")
plot(sf$year, sf$pcthispanic, type="l", ylim=c(0,max(data$pcthispanic)), main="Hispanics in San Francisco County", col="pink")
plot(sf$year, sf$pcthispanic, type="l", ylim=c(0,max(data$pcthispanic)), main="Hispanics in San Francisco County", col="red")
plot(sf$year, sf$pcthispanic, type="l", ylim=c(0,max(data$pcthispanic)), main="Hispanics in San Francisco County", col="black")
head(data)
data$hispanic_pop <- data$totalpop * data$pcthispanic
plot(data$hispanic_pop)
head(data$hispanic_pop)
head(data)
data$pctasian <- data$totalpop * data$pctasian
data$asian_pop <- data$totalpop * data$pctasian
data$white_pop <- data$totalpop * data$pctwhite
data$black_pop <- data$totalpop * data$pctblack
data$amind_pop <- data$totalpop * data$pctamind
head(data)
names(data)
data$otherpop <- data$totalpop * data$pctother
head(data$hispanic_pop)
names(data)
min(data$hispanic_pop)
plot(data$year, data$hispanic_pop)
head(data$hispanic_pop)
head(data)
data(names)
names(data)
data$otherpop <- data$totalpop * data$pctother
names(data)
data$other_pop <- data$totalpop * data$pctother
names(data)
subset(data$pcthispanic, data$2010)
$subset
?subset
subset(data$hispanic_pop)
subset(data$hispanic_pop, 2010)
subset(data$hispanic_pop, data$2010)
?sort
subset(max(data$hispanic_pop))
subset(max(data$hispanic_pop), data$y2010)
?max
max(data$hispanic_pop)
max(data$2010, data$hispanic_pop)
max(data$hispanic_pop)
min(data$hispanic_pop)
data(head)
head(data)
head(data$hispanic_pop)
sf
subset(data, year == "2010")
subset(data, population == "hispanic_pop")
head(data)
subset(data, hispanic_pop == "hispanic_pop")
hispanic_pop[order(hispanic_pop$year)]
hispanic_pop[order(hispanic_pop$year), 0]
data <- data[order(data$hispanic_pop, decreasing=T), ]
head(data)
?aggregate
aggregate(data$hispanic_pop, list(data$year), sum)
aggregate(data$hispanic_pop, list(data$year), min)
names(hispanic_pop)
hispanics_by_year <- aggregate(data$hispanic_pop, list(data$year), sum)
head(hispanics_by_year)
names(hispanics_by_year)
names(hispanics_by_year) <- c("year", "tot_hisp_pop")
hispanics_by_year
aggregate(data$total_pop, list(data$year), sum)
aggregate(data$totalpop, list(data$year), sum)
total_ca_pop <- aggregate(data$totalpop, list(data$year), sum)
head(total_ca_pop)
names(total_ca_pop) <- c("year", "total_ca_pop")
total_ca_pop
hispanics_by_year
state_totals <- merge(total_ca_pop, hispanics_by_year, by="year")
head(state_totals)
state_totals$pcthispanic <- state_totals$hispanics_by_year/stateTotals$tot_ca_pop
state_totals$pcthispanic <- state_totals$hispanics_by_year/state_totals$tot_ca_pop
head(state_totals)
?merge
state_totals
state_totals$pcthispanic <- state_totals$hispanics_by_year/state_totals$tot_ca_pop
state_totals$pcthispanic <- state_totals$tot_hisp_pop/state_totals$tot_ca_pop
state_totals$pcthispanic <- state_totals$tot_hisp_pop/state_totals$total_ca_pop
plot(state_totals$year, state_totals$pcthispanic, main="Cali. percent Hispanic", ylim=c(0,max(data$pcthispanic)), type="l", col="red", lwd=2)
plot(state_totals$year, state_totals$pcthispanic, main="Cali. percent Hispanic", ylim=c(0,max(data$pcthispanic)), type="l", col="red", lwd=2)lines(sf$year, sf$pcthispanic)
?lines
sf
plot(state_totals$year, state_totals$pcthispanic, main="Calif. pct Hispanic", ylim=c(0,max(data$pcthispanic)), type="l", col="red", lwd=2)
lines(sf$year, sf$pcthispanic)
plot(state_totals$year, state_totals$pcthispanic, main="Cali. percent Hispanic", ylim=c(0,max(data$pcthispanic)), type="l", col="red", lwd=2)
lines(sf$year, sf$pcthispanic)
county_name <- "San Francisco"
plot(state_totals$year, state_totals$pcthispanic, main="Cali. percent Hispanic", ylim=c(0,max(data$pcthispanic)), type="l", col="red", lwd=2)
lines(sf$year, sf$pcthispanic)
plot(state_totals$year, state_totals$pcthispanic, main="Cali. percent Hispanic", ylim=c(0,0.4)), type="l", col="red", lwd=2)
plot(state_totals$year, state_totals$pcthispanic, main="Cali. percent Hispanic", ylim=c(0,max(0.4)), type="l", col="red", lwd=2)
lines(sf$year, sf$pcthispanic)
plot(state_totals$year, state_totals$pcthispanic, main="Calif. percent Hispanic", ylim=c(0,max(0.4)), type="l", col="red", lwd=2)
lines(sf$year, sf$pcthispanic)
county_name <- "San Francisco"
this_county <- subset(data, county == county_name)
this_county <- this_county[order(this_county$year), 0]
plot(state_totals$year, state_totals$pcthispanic, main="Calif. percent Hispanic", ylim=c(0,max(0.4)), type="l", col="red", lwd=2)
lines(sf$year, sf$pcthispanic)
plot_lines_for_county <- function(county){
county_name <- county
this_county <- subset(data, county == county_name)
this_county <- this_county[order(this_county$year),]
lines(this_county$year, this_county$pcthispanic)
}
plot_lines_for_county("Los Angeles")
plot(state_totals$year, state_totals$pcthispanic, main="Calif. percent Hispanic", ylim=c(0,max(data$pcthispanic)), type="l", col="red", lwd=2)
plot_lines_for_county("San Francisco")
plot_lines_for_county("Los Angeles")
plot_lines_for_county("Ventura")
plot_lines_for_county("Alameda")
plot_lines_for_county("Contra Costa")
for (i in unique(data$county)) { plot_lines_for_county(i)}
plot_weighted_lines_for_county <- function(county) {
county_name <- county
this_county <- subset(data, county == county_name)
this_county <- this_county[order(this_county$year),]
lines(this_county$year, this_county$pcthispanic, lwd= this_county$hispanic_pop/100000 )
y2020 <- subset(this_county, year == 2020)
text(y2020$year, y2020$pcthispanic, labels=y2020$county, adj=0, cex=.5)
}
plot(state_totals$year, state_totals$pcthispanic, main="Calif. pct Hispanic with population sizing", ylim=c(0,max(data$pcthispanic)), type="l", col="red", lwd=2, xlim=c(1980, 2030))
for (i in unique(data$county)) {
plot_weighted_lines_for_county(i)
}
install.packages("maptools")
library(maptools)
shapes <- readShapePoly("shapes/ca/counties.shp")
shapes <- readShapePoly("shapes/ca/counties.shp")
names(shapes)
class(shapes)
plot(shapes)
data.frame(shapes)
title("I <3 Maps")
plot(shapes, col=rainbow(100))
axis(1)
plot(shapes, col="green")
plot(shapes, col=rainbow(100))
map_data <- data.frame(shapes)
map_data
data$FIPS <- sprintf("%05d",data$fips)
y2010 <- subset(data, year == 2010)
y2010$FIPS%in%map_data$FIPS
head(y2010, n=2)
match(map_data$FIPS,data$FIPS)
dim(map_data)
dim(y2010)
y2010
y2010$FIPS <- sprintf("%05d", data$fips)
y2010$FIPS%in%map_data$FIPS
match(map_data$FIPS,data$FIPS)
match(map_data$FIPS,y2010$FIPS)
match_order <- match(map_data$FIPS,y2010$FIPS)
data$pcthispanic
data$pcthispanic[match_order]
y2010$FIPS
match_order
map_data$pctHispanic2010 <- data$pcthispanic[match_order]
hist(map_data$pctHispanic2010)
save.image("~/Documents/maps intro R.RData")
hist(map_data$pctHispanic2010)
